<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" th:replace="base::layout(~{::section})">

<head>
	<meta charset="UTF-8">
	<title>home page</title>

</head>

<body>
	<section class="back mt-5 pt-4">
		<div class="container">
			<div class="row">
				<div class="col-md-6 offset-md-3">
					<div class="form-card border border-secondary mt-5">
						<div class="text-center">
							<img th:src="@{/img/Login_icon.png}" height="50px" width="50px" />
						</div>
						<h1 class="text-center text-success">Login here...</h1>
						<br>
						<div class="container-fluid">
							<!--form for user login-->
							<form class="form" th:action="@{/user_login}" action="#" method="post"
								onsubmit="return validatelogin()">
								<div th:if="${session.alert}" th:classappend="${session.alert.type}" class="alert m-3"
									role="alert">
									<strong class="text-center" th:text="${session.alert.content}"></strong>
									<th:block th:text="${@sessionHelper.removeAlertFromSession()}"></th:block>
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div th:if="${param.error}" class="alert alert-danger alert-dismissible fade show"
									role="alert">
									Invalid Username or Password !!
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div th:if="${param.logout}" class="alert alert-success alert-dismissible fade show"
									role="alert">
									You have been logged out !!
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>

								<div class="form-group">
									<label class="font-weight-bold" for="username">Username</label>
									<input name="username" id="username" type="text" class="form-control"
										aria-describedby="emailHelp" placeholder="Enter Username...">
									<div id="validationServer03Feedback" class="invalid-feedback">
										Please enter a Username
									</div>
								</div>
								<div class="form-group">
									<label class="font-weight-bold" for="password">Password</label>
									<input name="password" type="password" class="form-control" id="password"
										placeholder="Enter here...">
									<div class="toggle-password text-dark">
										<i class="fa-sharp fa-solid fa-eye"></i>
										<i class="fa-sharp fa-solid fa-eye-slash"></i>
									</div>
									<div id="validationServer03Feedback" class="invalid-feedback">
										Please enter a Password
									</div>
								</div>
								<input type="checkbox" id="remember-me" name="remember-me">
								<label class="form-check-label" for="remember-me">Remember me</label>
								<!--redirect to registration page-->
								<div class="text-center">
									<a th:href="@{/new_user}" class="badge badge-warning mb-3"> if not registered
										click here </a>
								</div>
								<div class="container text-center">
									<button type="submit" class="btn btn-success">
										<i class="fa-solid fa-right-to-bracket fa-beat-fade"></i> Login
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			//function to get element by id
			function _id(name) {
				return document.getElementById(name);
			}
			//function to get element by class
			function _class(name) {
				return document.getElementsByClassName(name);
			}

			//event handling for toggling password
			_class("toggle-password")[0].addEventListener("click", function () {
				_class("toggle-password")[0].classList.toggle("active");
				if (_id("password").getAttribute("type") === "password") {
					_id("password").setAttribute("type", "text");
				} else {
					_id("password").setAttribute("type", "password");
				}
			});
		</script>
	</section>
</body>

</html>